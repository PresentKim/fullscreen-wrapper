{"version":3,"file":"fullscreen.js","sources":["../src/fullscreen.ts"],"sourcesContent":["const document = (window.document as any);\r\n\r\nclass FullScreen {\r\n    /**\r\n     * Returns true if document has the ability to display elements fullscreen and fullscreen is supported, or false otherwise.\r\n     * @see Document.fullscreenEnabled\r\n     */\r\n    public isEnabled: boolean;\r\n\r\n    /** @inner Name of element property */\r\n    public elementProperty: string;\r\n\r\n    /** @inner Name of request method */\r\n    public requestMethod: string;\r\n\r\n    /** @inner Name of exit method */\r\n    public exitMethod: string;\r\n\r\n    /** @inner Name of change event */\r\n    public changeEvent: string;\r\n\r\n    /** @inner Name of error event */\r\n    public errorEvent: string;\r\n\r\n    /** @inner */\r\n    constructor() {\r\n        this.isEnabled = false;\r\n        this.elementProperty = \"\";\r\n        this.requestMethod = \"\";\r\n        this.exitMethod = \"\";\r\n        this.changeEvent = \"\";\r\n        this.errorEvent = \"\";\r\n    }\r\n\r\n    /** Returns true if document has fullscreen element, or false otherwise. */\r\n    get isFullscreen(): boolean {\r\n        return Boolean(this.element);\r\n    }\r\n\r\n    /**\r\n     * Returns document's fullscreen element.\r\n     * @see Document.fullscreenElement\r\n     */\r\n    get element(): Element | undefined {\r\n        return document[this.elementProperty];\r\n    }\r\n\r\n    /**\r\n     * Displays element fullscreen and resolves promise when done.\r\n     * @see Element.requestFullscreen\r\n     */\r\n    request(element: Element = document.documentElement): boolean {\r\n        if (!(element as any)[this.requestMethod])\r\n            return false;\r\n\r\n        (element as any)[this.requestMethod]();\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Stops document's fullscreen element from being displayed fullscreen and resolves promise when done.\r\n     * @see Element.exitFullscreen\r\n     */\r\n    exit(): boolean {\r\n        if (!document[this.exitMethod])\r\n            return false;\r\n\r\n        document[this.exitMethod]();\r\n        return true;\r\n    }\r\n\r\n    /** Appends an event listener for \"fullscreenchange\" event. The callback argument sets the callback that will be invoked when the event is dispatched. */\r\n    onChange(callback: (this: Document, ev: Event) => any): boolean {\r\n        if (!this.isEnabled)\r\n            return false;\r\n\r\n        document.addEventListener(this.changeEvent, callback, false);\r\n        return true;\r\n    }\r\n\r\n    /** Appends an event listener for \"fullscreenerror\" event. The callback argument sets the callback that will be invoked when the event is dispatched. */\r\n    onError(callback: (this: Document, ev: Event) => any): boolean {\r\n        if (!this.isEnabled)\r\n            return false;\r\n\r\n        document.addEventListener(this.errorEvent, callback, false);\r\n        return true;\r\n    }\r\n\r\n    /** Toggle fullscreen */\r\n    toggle(element: Element = document.documentElement): boolean {\r\n        return this.isFullscreen ? this.exit() : this.request(element);\r\n    }\r\n}\r\n\r\nconst fullscreen = new FullScreen();\r\nif (document.fullscreenEnabled) {\r\n    fullscreen.isEnabled = document.fullscreenEnabled;\r\n    fullscreen.elementProperty = \"fullscreenElement\";\r\n    fullscreen.requestMethod = \"requestFullscreen\";\r\n    fullscreen.exitMethod = \"exitFullscreen\";\r\n    fullscreen.changeEvent = \"fullscreenchange\";\r\n    fullscreen.errorEvent = \"fullscreenerror\";\r\n} else if (document.webkitFullscreenEnabled || document.webkitCancelFullScreen) {\r\n    fullscreen.isEnabled = document.fullscreenEnabled || Boolean(document.webkitCancelFullScreen);\r\n    fullscreen.requestMethod = \"webkitRequestFullScreen\";\r\n    fullscreen.changeEvent = \"webkitfullscreenchange\";\r\n    fullscreen.errorEvent = \"webkitfullscreenerror\";\r\n    if (document.webkitFullscreenEnabled) {\r\n        fullscreen.elementProperty = \"webkitFullscreenElement\";\r\n        fullscreen.exitMethod = \"webkitExitFullscreen\";\r\n    } else {\r\n        fullscreen.elementProperty = \"webkitCurrentFullScreenElement\";\r\n        fullscreen.exitMethod = \"webkitCancelFullScreen\";\r\n    }\r\n} else if (document.msFullscreenEnabled) {\r\n    fullscreen.isEnabled = document.msFullscreenEnabled;\r\n    fullscreen.elementProperty = \"msFullscreenElement\";\r\n    fullscreen.requestMethod = \"msRequestFullscreen\";\r\n    fullscreen.exitMethod = \"msExitFullscreen\";\r\n    fullscreen.changeEvent = \"MSFullscreenChange\";\r\n    fullscreen.errorEvent = \"MSFullscreenError\";\r\n} else if (document.mozFullScreenEnabled) {\r\n    fullscreen.isEnabled = document.mozFullScreenEnabled;\r\n    fullscreen.elementProperty = \"mozFullScreenElement\";\r\n    fullscreen.requestMethod = \"mozRequestFullScreen\";\r\n    fullscreen.exitMethod = \"mozCancelFullScreen\";\r\n    fullscreen.changeEvent = \"mozfullscreenchange\";\r\n    fullscreen.errorEvent = \"mozfullscreenerror\";\r\n}\r\n\r\nexport default fullscreen;"],"names":[],"mappings":"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"}